$(document).ready(function(){if(navigator.userAgent.indexOf("iPhone")>-1){$("#about").css("font-size","10px")}if($("canvas").length>0){var o,ap,b,f,F=Math.PI*2,X=false,B,R,q,ah,V,g,p=500,z=250,al,S="",l=25,Z=hashOver=-1,aa=[],r,j=12,O,h,k=50,v=42,I=[],P=4,c=1,H=new Image(),ai=new Image(),y=new Image(),ae=new Image(),J=new Image(),n=new Image(),Y=0,E,u,ak=false,x=false,ac="Enter Twitter Username",G,U,t=[],W=100,aq;window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(ar,e){window.setTimeout(ar,1000/60)}})();o=document.getElementById("tweets");try{ap=o.getContext("2d")}catch(aj){}G=document.getElementById("snow");try{U=G.getContext("2d")}catch(aj){}try{U.fillStyle="rgba(255, 255, 255, .5)"}catch(aj){}b=o.width;f=o.height;an();al=I[c].text;D();ao();B=$("#tweetBox");R=$("#tweetID");q=$("#tweetCopy");ah=$("#tweetPic");g=$("#filterWarning");V=$("#form");$.ajaxSetup({cache:true});$("#user").val(ac);$("#user").keypress(function(ar){if(ar.which==13){$("#DoSearch").click()}});$("#DoSearch").click(function(ar){S=$("#user").val();S.replace(new RegExp("@"),"");if(S!=ac){M();d();N(true)}ar.target.blur();return false});$("#ResetSearch").click(function(ar){S="";if(S!=ac){M();d();$("#user").val(ac);N(false)}ar.target.blur();return false});ai.src="images/starSheet.png";ae.src="images/hashTags.png";y.src="images/MerryChristmas.png";H.src="images/tweetTree.png";$(ai).load(function(){ab()});$(y).load(function(){$("#about").fadeIn(1000)});$(ae).load(function(){n.src="images/ribbon.png"});$(H).load(function(){J.src="images/baubleSheet.png";af();d();ag();K()})}else{K()}function N(e){g.stop(true,true);g.html("Only showing tweets by <strong>@"+S);e?g.fadeIn(250):g.fadeOut(250)}function K(){$("body").css("background-image","url(images/bg.jpg)")}function ao(){$(G).mousedown(function(at){var ar=s(at);Q(ar.x,ar.y,at.target)});$(G).mousemove(function(at){var ar=s(at);T(ar.x,ar.y,at.target)});$("#user").bind("focus",function(ar){ar.target.value=""});$("#user").bind("blur",function(ar){w(ar)})}function an(){aa.push({x:277,y:230});aa.push({x:191,y:455});aa.push({x:232,y:314});aa.push({x:156,y:231});aa.push({x:377,y:484});aa.push({x:162,y:317});aa.push({x:334,y:314});aa.push({x:271,y:393});aa.push({x:119,y:399});aa.push({x:247,y:166});aa.push({x:110,y:495});aa.push({x:288,y:481});I.push({x:549,y:306,w:215,hx:-12,hy:3,text:"fpchristmas"});I.push({x:559,y:390,w:135,hx:-4,hy:-2,text:"snow"});I.push({x:729,y:367,w:145,hx:0,hy:-5,text:"santa"});I.push({x:894,y:322,w:185,hx:0,hy:-3,text:"reindeer"})}function D(){for(i=0;i<W;i+=1){aq={};ad(aq,Math.random()*f);t.push(aq)}}function ad(e,ar){e.x=Math.random()*b;e.y=ar;e.ax=Math.random()*5+2;e.vx=Math.random()*0.2+0.1;e.vy=Math.random()*1.5+0.2;e.ws=Math.random()*0.04+0.01;e.radius=3*e.vy}function m(){for(i=0;i<W;i+=1){aq=t[i];aq.x+=Math.sin(aq.ax+=aq.ws)*0.5;aq.y+=aq.vy;if(aq.x>b||aq.x<0||aq.y>f){ad(aq,-5)}}}function L(){for(i=0;i<W;i+=1){aq=t[i];try{U.beginPath();U.arc(aq.x,aq.y,aq.radius,0,F,false);U.fill()}catch(ar){}}}function ag(){if(!X){try{ap.clearRect(0,0,b,f)}catch(ar){}am();X=true}try{U.clearRect(0,0,b,f)}catch(ar){}m();L();requestAnimFrame(ag)}function s(at){var ar;if(!at){at=window.event}if(at.target){ar=at.target}else{if(at.srcElement){ar=at.srcElement}}if(ar.nodeType==3){ar=ar.parentNode}return{x:at.pageX-$(ar).offset().left,y:at.pageY-$(ar).offset().top}}function Q(e,at,ar){for(i=0;i<O;i+=1){r=aa[i];if(e>r.x-l&&e<r.x+l&&at>r.y-l&&at<r.y+l){if(h!=i){h=i;M();A(r);break}}}for(i=0;i<I.length;i+=1){r=I[i];if(e>r.x-k&&e<r.x+k&&at>r.y-v&&at<r.y+v){c=i;al=r.text;M();d();break}}}function T(e,at,ar){for(i=0;i<O;i+=1){r=aa[i];if(e>r.x-l&&e<r.x+l&&at>r.y-l&&at<r.y+l){if(Z!=i){ar.style.cursor="pointer";Z=i}X=false;return}}if(Z!=-1){Z=-1;h=-1;ar.style.cursor="default";X=false}for(i=0;i<I.length;i+=1){r=I[i];k=r.w>>1;if(e>r.x-k&&e<r.x+k&&at>r.y-v&&at<r.y+v){if(hashOver!=i){ar.style.cursor="pointer";hashOver=i}X=false;return}}if(hashOver!=-1){hashOver=-1;ar.style.cursor="default";X=false}a()}function w(ar){if(ar.target.value==""){if(S!=""){S="";d();N(false)}ar.target.value=ac}}function d(){ak=true;var e=S!=""?"++from%3A"+S:"";$.getJSON("http://search.twitter.com/search.json?callback=?&rpp="+j+"&q=%23"+al+e,function(ar){C();$.each(ar.results,function(at,au){if(au.text!==undefined){aa[at].name=au.from_user_name!=undefined?au.from_user_name:"";aa[at].text=au.text;aa[at].pic=au.profile_image_url;aa[at].userId="@"+au.from_user;O+=1}});if(O>0){h=0;A(aa[h]);a()}V.fadeIn(p);ak=false;X=false})}function C(){clearInterval(u);for(i=0;i<aa.length;i+=1){aa[i].name="";aa[i].text="";aa[i].pic=null}h=-1;O=0}function am(){var at,ar,az,ay,au=dstW=42,aw=dstH=40,av=0;try{ap.drawImage(H,10,70)}catch(ax){}if(ak){try{ap.clearRect(190,30,80,80)}catch(ax){}try{ap.drawImage(H,184,10,60,30,194,80,60,30)}catch(ax){}try{ap.drawImage(ai,70*Y,0,70,70,188,36,70,70)}catch(ax){}Y=(Y>3)?0:Y+1}else{try{ap.drawImage(ai,0,0,70,70,188,36,70,70)}catch(ax){}}try{ap.drawImage(y,442,35)}catch(ax){}for(i=0;i<O;i+=1){ar=(i==Z)?40:0;at=au*i,az=aa[i].x-21,ay=aa[i].y-25;try{ap.drawImage(J,at,ar,au,aw,az,ay,dstW,dstH)}catch(ax){}}for(i=0;i<P;i+=1){r=I[i];ar=i==hashOver?95:0;at=av,az=r.x-(r.w>>1),ay=r.y-v;try{ap.drawImage(ae,at,ar,r.w,v<<1,az,ay,r.w,v<<1)}catch(ax){}av+=I[i].w}try{r=I[c];ap.drawImage(n,r.x-(r.w>>1)+r.hx,r.y-35+r.hy)}catch(ax){}}function a(){clearInterval(u);if(O>0){u=setInterval(function(){h=(h>=O-1)?0:h+1;A(aa[h])},10000)}}function ab(){if(!x){E=setInterval(function(){try{ap.clearRect(b>>1,f>>1,80,80);ap.drawImage(ai,70*Y,0,70,70,b>>1,f>>1,70,70)}catch(ar){}Y=(Y>2)?0:Y+1},33)}}function af(){x=true;clearInterval(E)}function A(e){B.stop(true,true);B.fadeOut(z,function(){R.html(e.name+" ("+e.userId.parseUsername()+")");q.html(e.text.parseURL().parseUsername().parseHashtag().replace(new RegExp("cunt|fuck|nigger|nigga","gi"),"$#*%!"));ah.attr("src",e.pic);B.fadeIn(p)})}function M(){B.stop(true,true);B.fadeOut(z)}});